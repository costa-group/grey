{"language": "Solidity", "sources": {"FixedFeeRegistrar.sol": {"content": "//sol FixedFeeRegistrar\n// Simple global registrar with fixed-fee reservations.\n// @authors:\n//   Gav Wood <g@ethdev.com>\n\npragma solidity >=0.4.0 <0.9.0;\n\nabstract contract Registrar {\n\tevent Changed(string indexed name);\n\n\tfunction owner(string memory _name) public virtual view returns (address o_owner);\n\tfunction addr(string memory _name) public virtual view returns (address o_address);\n\tfunction subRegistrar(string memory _name) virtual public view returns (address o_subRegistrar);\n\tfunction content(string memory _name) public virtual view returns (bytes32 o_content);\n}\n\ncontract FixedFeeRegistrar is Registrar {\n\tstruct Record {\n\t\taddress addr;\n\t\taddress subRegistrar;\n\t\tbytes32 content;\n\t\taddress owner;\n\t}\n\n\tmodifier onlyrecordowner(string memory _name) { if (m_record(_name).owner == msg.sender) _; }\n\n\tfunction reserve(string memory _name) public payable {\n\t\tRecord storage rec = m_record(_name);\n\t\tif (rec.owner == 0x0000000000000000000000000000000000000000 && msg.value >= c_fee) {\n\t\t\trec.owner = msg.sender;\n\t\t\temit Changed(_name);\n\t\t}\n\t}\n\tfunction disown(string memory _name, address payable _refund) onlyrecordowner(_name) public {\n\t\tdelete m_recordData[uint(keccak256(bytes(_name))) / 8];\n\t\tif (!_refund.send(c_fee))\n\t\t\trevert();\n\t\temit Changed(_name);\n\t}\n\tfunction transfer(string memory _name, address _newOwner) onlyrecordowner(_name) public {\n\t\tm_record(_name).owner = _newOwner;\n\t\temit Changed(_name);\n\t}\n\tfunction setAddr(string memory _name, address _a) onlyrecordowner(_name) public {\n\t\tm_record(_name).addr = _a;\n\t\temit Changed(_name);\n\t}\n\tfunction setSubRegistrar(string memory _name, address _registrar) onlyrecordowner(_name) public {\n\t\tm_record(_name).subRegistrar = _registrar;\n\t\temit Changed(_name);\n\t}\n\tfunction setContent(string memory _name, bytes32 _content) onlyrecordowner(_name) public {\n\t\tm_record(_name).content = _content;\n\t\temit Changed(_name);\n\t}\n\n\tfunction record(string memory _name) public view returns (address o_addr, address o_subRegistrar, bytes32 o_content, address o_owner) {\n\t\tRecord storage rec = m_record(_name);\n\t\to_addr = rec.addr;\n\t\to_subRegistrar = rec.subRegistrar;\n\t\to_content = rec.content;\n\t\to_owner = rec.owner;\n\t}\n\tfunction addr(string memory _name) public override view returns (address) { return m_record(_name).addr; }\n\tfunction subRegistrar(string memory _name) public override view returns (address) { return m_record(_name).subRegistrar; }\n\tfunction content(string memory _name) public override view returns (bytes32) { return m_record(_name).content; }\n\tfunction owner(string memory _name) public override view returns (address) { return m_record(_name).owner; }\n\n\tRecord[2**253] m_recordData;\n\tfunction m_record(string memory _name) view internal returns (Record storage o_record) {\n\t\treturn m_recordData[uint(keccak256(bytes(_name))) / 8];\n\t}\n\tuint constant c_fee = 69 ether;\n}\n// ----\n// constructor()\n// gas irOptimized: 78076\n// gas irOptimized code: 307400\n// gas legacy: 115395\n// gas legacy code: 792400\n// gas legacyOptimized: 84598\n// gas legacyOptimized code: 388000\n// reserve(string), 69 ether: 0x20, 3, \"abc\" ->\n// ~ emit Changed(string): #0x4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45\n// gas irOptimized: 45967\n// gas legacy: 46842\n// gas legacyOptimized: 46091\n// owner(string): 0x20, 3, \"abc\" -> 0x1212121212121212121212121212120000000012\n// reserve(string), 70 ether: 0x20, 3, \"def\" ->\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// owner(string): 0x20, 3, \"def\" -> 0x1212121212121212121212121212120000000012\n// reserve(string), 68 ether: 0x20, 3, \"ghi\" ->\n// owner(string): 0x20, 3, \"ghi\" -> 0\n// account: 1 -> 0x1212121212121212121212121212120000001012\n// reserve(string), 69 ether: 0x20, 3, \"abc\" ->\n// owner(string): 0x20, 3, \"abc\" -> 0x1212121212121212121212121212120000000012\n// account: 0 -> 0x1212121212121212121212121212120000000012\n// setContent(string,bytes32): 0x40, 0, 3, \"abc\" ->\n// ~ emit Changed(string): #0x4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45\n// transfer(string,address): 0x40, 555, 3, \"abc\" ->\n// ~ emit Changed(string): #0x4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45\n// owner(string): 0x20, 3, \"abc\" -> 555\n// content(string): 0x20, 3, \"abc\" -> 0x00\n// setContent(string,bytes32): 0x40, 333, 3, \"def\" ->\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// setAddr(string,address): 0x40, 124, 3, \"def\" ->\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// setSubRegistrar(string,address): 0x40, 125, 3, \"def\" ->\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// content(string): 0x20, 3, \"def\" -> 333\n// addr(string): 0x20, 3, \"def\" -> 124\n// subRegistrar(string): 0x20, 3, \"def\" -> 125\n// balance: 0x124 -> 0\n// disown(string,address): 0x40, 0x124, 3, \"def\" ->\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// balance: 0x124 -> 0\n// ~ emit Changed(string): #0x34607c9bbfeb9c23509680f04363f298fdb0b5f9abe327304ecd1daca08cda9c\n// owner(string): 0x20, 3, \"def\" -> 0\n// content(string): 0x20, 3, \"def\" -> 0\n// addr(string): 0x20, 3, \"def\" -> 0\n// subRegistrar(string): 0x20, 3, \"def\" -> 0\n"}}, "settings": {"optimizer": {"enabled": true, "runs": 200, "details": {"peephole": false, "inliner": false, "jumpdestRemover": false, "orderLiterals": false, "deduplicate": false, "cse": false, "constantOptimizer": false}}, "outputSelection": {"*": {"*": ["abi", "metadata", "evm.bytecode", "evm.deployedBytecode", "evm.methodIdentifiers"]}}, "metadata": {"appendCBOR": false}}}